# 末端相机快速调整指南

## 当前配置

```xml
<origin xyz="0 0.12 0.05" rpy="0 -1.5708 1.5708"/>
```

**位置**:
- X = 0 (居中)
- Y = 0.12m (在 tool0 上方 12cm)
- Z = 0.05m (在 tool0 前方 5cm)

**朝向**: 向下看（俯视夹爪和目标物体）

## 如何调整

### 调整高度（最重要）
**文件**: `src/ur5e_gripper_moveit_config/urdf/ur5e_gripper.urdf.xacro`

找到第 54 行左右的：
```xml
<origin xyz="0 0.12 0.05" rpy="0 -1.5708 1.5708"/>
```

修改 **第二个值** (Y 值) 来调整高度：
```xml
<!-- 更高，视野更大 -->
<origin xyz="0 0.15 0.05" rpy="0 -1.5708 1.5708"/>

<!-- 更低，视野更小但细节更多 -->
<origin xyz="0 0.10 0.05" rpy="0 -1.5708 1.5708"/>
```

### 调整前后位置
修改 **第三个值** (Z 值)：
```xml
<!-- 更靠前（可能看到夹爪手指） -->
<origin xyz="0 0.12 0.10" rpy="0 -1.5708 1.5708"/>

<!-- 更靠后（只看到目标物体） -->
<origin xyz="0 0.12 0.00" rpy="0 -1.5708 1.5708"/>
```

### 调整俯仰角度
修改 **rpy 的第一个值** (roll)：
```xml
<!-- 向前倾斜（看更远的目标） -->
<origin xyz="0 0.12 0.05" rpy="0.2 -1.5708 1.5708"/>

<!-- 向后倾斜（看更近的目标） -->
<origin xyz="0 0.12 0.05" rpy="-0.2 -1.5708 1.5708"/>
```

## 测试调整

每次修改后：
```bash
# 1. 重新构建
colcon build --packages-select ur5e_gripper_moveit_config --symlink-install

# 2. 重启仿真
ros2 launch ur_bringup simulation.launch.py

# 3. 查看相机图像
ros2 run image_tools showimage --ros-args -r image:=color/image_raw
```

## 常见问题

### Q: 相机视野太小/太大
A: 调整 Y 值（高度）。更高 = 视野更大，更低 = 视野更小

### Q: 相机看到夹爪手指，干扰检测
A: 减小 Z 值，让相机更靠后

### Q: 相机看不到目标物体
A: 增大 Z 值，让相机更靠前

### Q: 相机角度不对
A: 调整 roll 值（rpy 第一个值）。正值 = 向前倾斜，负值 = 向后倾斜

## 推荐配置

### 抓取小物体
```xml
<origin xyz="0 0.10 0.03" rpy="0 -1.5708 1.5708"/>
```
- 高度较低，距离较近
- 适合精确抓取小物体

### 抓取大物体
```xml
<origin xyz="0 0.15 0.08" rpy="0 -1.5708 1.5708"/>
```
- 高度较高，距离较远
- 适合大物体或需要更大视野

### 通用配置（推荐）
```xml
<origin xyz="0 0.12 0.05" rpy="0 -1.5708 1.5708"/>
```
- 平衡的配置
- 适合大多数场景
